# 1. الصورة الأساسية: نستخدم صورة Alpine.
FROM alpine:latest

# 2. تثبيت مترجم GCC (الذي يشمل g++) وأدوات التطوير اللازمة.
# نستخدم 'apk' وهو مدير الحزم في Alpine.
RUN apk add --no-cache g++

# 3. تحديد مسار العمل داخل الحاوية
WORKDIR /usr/src/myapp

# 4. نسخ ملفات الكود المصدري (index.c++)
COPY index.c++ .

# 5. تجميع كود C++ باستخدام g++ (المترجم المثبت حديثاً)
# نستخدم الأمر g++ وليس c++ للتأكد من التجميع الصحيح.
RUN g++ -o myprogram index.c++

# 6. الأمر الذي سيتم تنفيذه عند تشغيل الحاوية
CMD ["./myprogram"]